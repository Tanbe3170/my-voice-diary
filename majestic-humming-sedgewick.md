# Phase 3 å®Ÿè£…è¨ˆç”»: UbuntuéŸ³å£°èªè­˜ï¼ˆNerd Dictationï¼‰

## Context

### ãªãœã“ã®å¤‰æ›´ãŒå¿…è¦ã‹

ç¾åœ¨ã€voice-diaryãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ä»¥ä¸‹ã®æ—¥è¨˜ä½œæˆæ–¹æ³•ãŒåˆ©ç”¨å¯èƒ½ã§ã™ï¼š
- **Phase 1**: æ‰‹å‹•ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ï¼ˆ`diary-push.sh`ï¼‰
- **Phase 2**: ã‚¹ãƒžãƒ›ã‹ã‚‰WebéŸ³å£°å…¥åŠ›ï¼ˆGitHub Pagesï¼‰

Phase 3ã§ã¯ã€**Ubuntu PCç’°å¢ƒã‹ã‚‰éŸ³å£°å…¥åŠ›ã§æ—¥è¨˜ã‚’ä½œæˆ**ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€PCã§ä½œæ¥­ä¸­ã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ç›´æŽ¥éŸ³å£°ã§æ—¥è¨˜ã‚’è¨˜éŒ²ã§ãã€ã‚ˆã‚Šè‡ªç„¶ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Ÿç¾ã§ãã¾ã™ã€‚

### è§£æ±ºã™ã‚‹å•é¡Œ

- Ubuntu PCã§ã®éŸ³å£°å…¥åŠ›æ‰‹æ®µãŒãªã„ï¼ˆç¾åœ¨ã¯æ‰‹å‹•ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã®ã¿ï¼‰
- ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ç›´æŽ¥æ—¥è¨˜ã‚’ä½œæˆã§ããªã„
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³éŸ³å£°èªè­˜ã®é¸æŠžè‚¢ãŒãªã„

### æœŸå¾…ã•ã‚Œã‚‹æˆæžœ

- `diary-voice`ã‚³ãƒžãƒ³ãƒ‰ã§éŸ³å£°å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã‚’èµ·å‹•
- æ—¥æœ¬èªžéŸ³å£°ã‚’ãƒ†ã‚­ã‚¹ãƒˆåŒ–ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã€ç„¡æ–™ï¼‰
- æ—¢å­˜ã®`diary-push.sh`ã¨çµ±åˆã—ã€Claude APIæ•´å½¢â†’GitHubä¿å­˜ã¾ã§è‡ªå‹•åŒ–

---

## å®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ã‚·ã‚¹ãƒ†ãƒ ãƒ•ãƒ­ãƒ¼

```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼éŸ³å£°]
    â†“
[Nerd Dictation + Vosk] - æ—¥æœ¬èªžéŸ³å£°èªè­˜ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ï¼‰
    â†“
[/tmp/nerd-dictation-output.txt] - ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã¸ãƒ†ã‚­ã‚¹ãƒˆä¿å­˜
    â†“
[diary-voice.sh] - æ–°è¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆèªè­˜çµæžœå–å¾—ãƒ»ç¢ºèªï¼‰
    â†“
[diary-push.sh] - æ—¢å­˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆClaude APIæ•´å½¢ + GitHubä¿å­˜ï¼‰
    â†“
[GitHubãƒªãƒã‚¸ãƒˆãƒª] - Markdownæ—¥è¨˜ä¿å­˜
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | å½¹å‰² | å®Ÿè£…çŠ¶æ…‹ |
|--------------|------|---------|
| `nerd-dictation` | éŸ³å£°èªè­˜ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆCLIï¼‰ | Phase 3ã§å°Žå…¥ |
| `vosk-model-small-ja-0.22` | æ—¥æœ¬èªžéŸ³å£°èªè­˜ãƒ¢ãƒ‡ãƒ«ï¼ˆç´„50MBï¼‰ | Phase 3ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ |
| `/tmp/nerd-dictation-output.txt` | éŸ³å£°èªè­˜çµæžœã®ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ« | Phase 3ã§ä½¿ç”¨ |
| `diary-voice.sh` | éŸ³å£°èªè­˜çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ | **Phase 3ã§æ–°è¦ä½œæˆ** |
| `diary-push.sh` | æ—¥è¨˜æ•´å½¢ãƒ»ä¿å­˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆ | âœ… æ—¢å­˜ï¼ˆPhase 1ï¼‰ |

---

## å®Ÿè£…è¨ˆç”»

### ã‚¿ã‚¹ã‚¯3.1: ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ30åˆ†ï¼‰

#### ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# 1. pipxã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆNerd Dictationç”¨ï¼‰
sudo apt update
sudo apt install -y pipx
pipx ensurepath
source ~/.bashrc

# 2. Nerd Dictationã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pipx install nerd-dictation

# 4. Voskãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆæ—¥æœ¬èªžã€ç´„50MBï¼‰
cd ~
wget https://alphacephei.com/vosk/models/vosk-model-small-ja-0.22.zip
unzip vosk-model-small-ja-0.22.zip
rm vosk-model-small-ja-0.22.zip

# 5. Nerd Dictationè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›æ–¹å¼ï¼‰
mkdir -p ~/.config/nerd-dictation
cat > ~/.config/nerd-dictation/nerd-dictation.conf << 'EOF'
--vosk-model-dir=/home/minori/vosk-model-small-ja-0.22
--output=/tmp/nerd-dictation-output.txt
EOF

# 6. å‹•ä½œç¢ºèªï¼ˆä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›ã®æ¤œè¨¼ï¼‰
nerd-dictation begin &
# ã€Œã“ã‚“ã«ã¡ã¯ã€ã¨è©±ã™
nerd-dictation end
cat /tmp/nerd-dictation-output.txt
# æœŸå¾…: ã€Œã“ã‚“ã«ã¡ã¯ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

---

### ã‚¿ã‚¹ã‚¯3.2: diary-voice.sh ã®ä½œæˆï¼ˆ30åˆ†ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«: `scripts/diary-voice.sh`

**å®Ÿè£…ã®æ ¸å¿ƒéƒ¨åˆ†:**

```bash
#!/bin/bash
# diary-voice.sh
# éŸ³å£°èªè­˜ â†’ æ—¥è¨˜æ•´å½¢ â†’ GitHubãƒ—ãƒƒã‚·ãƒ¥ã®ä¸€æ‹¬å®Ÿè¡Œ

set -e  # ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚‰å³åº§ã«çµ‚äº†

# è‰²ä»˜ããƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”¨ï¼ˆdiary-push.shã¨åŒã˜ï¼‰
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
VOSK_MODEL="$HOME/vosk-model-small-ja-0.22"
NERD_PID=""

# === ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©ï¼ˆCtrl+Cã‚„ç•°å¸¸çµ‚äº†æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰ ===
cleanup() {
    if [ -n "$NERD_PID" ] && ps -p $NERD_PID > /dev/null 2>&1; then
        echo -e "${YELLOW}ðŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ä¸­...${NC}"
        nerd-dictation end 2>/dev/null || true
        kill -TERM $NERD_PID 2>/dev/null || true
        sleep 1
        if ps -p $NERD_PID > /dev/null 2>&1; then
            kill -9 $NERD_PID 2>/dev/null || true
        fi
    fi
    # ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
    rm -f /tmp/nerd-dictation-output.txt
}
trap cleanup INT TERM EXIT

# === ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ ===
# 1. nerd-dictationç¢ºèª
if ! command -v nerd-dictation &> /dev/null; then
    echo -e "${RED}âŒ ã‚¨ãƒ©ãƒ¼: nerd-dictationãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“${NC}"
    echo "ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«: pipx install nerd-dictation"
    exit 1
fi

# 2. Voskãƒ¢ãƒ‡ãƒ«ç¢ºèª
if [ ! -d "$VOSK_MODEL" ]; then
    echo -e "${RED}âŒ ã‚¨ãƒ©ãƒ¼: Voskãƒ¢ãƒ‡ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“${NC}"
    echo "æœŸå¾…ã•ã‚Œã‚‹ãƒ‘ã‚¹: $VOSK_MODEL"
    exit 1
fi

# === éŸ³å£°èªè­˜é–‹å§‹ ===
echo -e "${BLUE}ðŸŽ¤ éŸ³å£°å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™${NC}"
echo "1. Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦éŸ³å£°èªè­˜ã‚’é–‹å§‹"
echo "2. æ—¥è¨˜ã®å†…å®¹ã‚’è©±ã™"
echo "3. è©±ã—çµ‚ã‚ã£ãŸã‚‰ã‚‚ã†ä¸€åº¦Enterã‚­ãƒ¼ã‚’æŠ¼ã™"
read -p "æº–å‚™ãŒã§ããŸã‚‰Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„..."

echo -e "${BLUE}ðŸŽ¤ éŸ³å£°èªè­˜ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚è©±ã—ã¦ãã ã•ã„...${NC}"
nerd-dictation begin --vosk-model-dir="$VOSK_MODEL" &
NERD_PID=$!

# ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•ç¢ºèª
sleep 1
if ! ps -p $NERD_PID > /dev/null 2>&1; then
    echo -e "${RED}âŒ ã‚¨ãƒ©ãƒ¼: Nerd Dictationã®èµ·å‹•ã«å¤±æ•—ã—ã¾ã—ãŸ${NC}"
    exit 1
fi

# === ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œå¾…ã¡ ===
read -p "è©±ã—çµ‚ã‚ã£ãŸã‚‰Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„..."

# === éŸ³å£°èªè­˜çµ‚äº† ===
nerd-dictation end

# ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†å¾…æ©Ÿï¼ˆSIGTERM â†’ wait â†’ æœ€çµ‚æ‰‹æ®µã§SIGKILLï¼‰
kill -TERM $NERD_PID 2>/dev/null || true
for i in {1..5}; do
    if ! ps -p $NERD_PID > /dev/null 2>&1; then
        break
    fi
    sleep 1
done

# æœ€çµ‚æ‰‹æ®µã§ã®å¼·åˆ¶çµ‚äº†ï¼ˆSIGTERMã§çµ‚äº†ã—ãªã„å ´åˆã®ã¿ï¼‰
if ps -p $NERD_PID > /dev/null 2>&1; then
    echo -e "${YELLOW}âš ï¸  ãƒ—ãƒ­ã‚»ã‚¹ãŒå¿œç­”ã—ãªã„ãŸã‚ã€å¼·åˆ¶çµ‚äº†ã—ã¾ã™${NC}"
    kill -9 $NERD_PID 2>/dev/null || true
fi

# === èªè­˜çµæžœå–å¾—ï¼ˆä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ï¼‰ ===
OUTPUT_FILE="/tmp/nerd-dictation-output.txt"
if [ ! -f "$OUTPUT_FILE" ]; then
    echo -e "${RED}âŒ éŸ³å£°èªè­˜çµæžœãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“${NC}"
    echo "åŽŸå› : ãƒžã‚¤ã‚¯ãŒæ­£ã—ãæŽ¥ç¶šã•ã‚Œã¦ã„ãªã„ã€éŸ³å£°ãŒå°ã•ã™ãŽã‚‹ã€Nerd DictationãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„"
    exit 1
fi

RAW_TEXT=$(cat "$OUTPUT_FILE" 2>/dev/null || echo "")

if [ -z "$RAW_TEXT" ]; then
    echo -e "${RED}âŒ éŸ³å£°èªè­˜ã«å¤±æ•—ã—ã¾ã—ãŸï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã¯å­˜åœ¨ã™ã‚‹ãŒç©ºï¼‰${NC}"
    echo "åŽŸå› : ãƒžã‚¤ã‚¯ãŒæ­£ã—ãæŽ¥ç¶šã•ã‚Œã¦ã„ãªã„ã€éŸ³å£°ãŒå°ã•ã™ãŽã‚‹"
    exit 1
fi

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
rm -f "$OUTPUT_FILE"

echo -e "${GREEN}âœ… éŸ³å£°èªè­˜å®Œäº†ï¼${NC}"
echo "ã€èªè­˜ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã€‘"
echo "----------------------------------------"
echo "$RAW_TEXT"
echo "----------------------------------------"

# === ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèª ===
read -p "ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã§æ—¥è¨˜ã‚’ä½œæˆã—ã¾ã™ã‹ï¼Ÿ (y/n): " -n 1 -r
echo ""

if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo -e "${YELLOW}âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ${NC}"
    exit 0
fi

# === diary-push.shå®Ÿè¡Œ ===
bash "$SCRIPT_DIR/diary-push.sh" "$RAW_TEXT"
```

**å®Ÿè¡Œæ¨©é™ä»˜ä¸Ž:**
```bash
chmod +x ~/diary/scripts/diary-voice.sh
```

---

### ã‚¿ã‚¹ã‚¯3.3: ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šï¼ˆ10åˆ†ï¼‰

```bash
# ~/.bashrcã«è¿½åŠ 
cat >> ~/.bashrc << 'EOF'

# voice-diary ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
alias diary-voice='bash ~/diary/scripts/diary-voice.sh'
alias diary='bash ~/diary/scripts/diary-push.sh'
EOF

# åæ˜ 
source ~/.bashrc

# ç¢ºèª
alias | grep diary
```

---

### ã‚¿ã‚¹ã‚¯3.4: å‹•ä½œãƒ†ã‚¹ãƒˆï¼ˆ30åˆ†ï¼‰

#### ãƒ†ã‚¹ãƒˆ1: ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯

```bash
# nerd-dictationæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¤œè¨¼ï¼ˆPATHã‚’åˆ¶é™ï¼‰
env PATH=/usr/bin:/bin bash ~/diary/scripts/diary-voice.sh
# æœŸå¾…: "âŒ ã‚¨ãƒ©ãƒ¼: nerd-dictationãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã›ã‚“" ãŒè¡¨ç¤ºã•ã‚Œã‚‹

# Voskãƒ¢ãƒ‡ãƒ«ãªã—æ¤œè¨¼
mv ~/vosk-model-small-ja-0.22 ~/vosk-model-small-ja-0.22.bak
bash ~/diary/scripts/diary-voice.sh
# æœŸå¾…: "âŒ ã‚¨ãƒ©ãƒ¼: Voskãƒ¢ãƒ‡ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“" ãŒè¡¨ç¤ºã•ã‚Œã‚‹
mv ~/vosk-model-small-ja-0.22.bak ~/vosk-model-small-ja-0.22
```

#### ãƒ†ã‚¹ãƒˆ2: éŸ³å£°èªè­˜ã®ãƒ†ã‚¹ãƒˆ

```bash
# å®Ÿéš›ã«éŸ³å£°å…¥åŠ›
bash ~/diary/scripts/diary-voice.sh
# ãƒ†ã‚¹ãƒˆå…¥åŠ›: "ä»Šæ—¥ã¯æœã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å­¦ç¿’ã‚’ã—ã¦ã„ã¾ã—ãŸ"
# 'n'ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«
```

#### ãƒ†ã‚¹ãƒˆ3: æ—¥è¨˜ä½œæˆã®å®Œå…¨ãƒ•ãƒ­ãƒ¼

```bash
# å®Ÿéš›ã«æ—¥è¨˜ä½œæˆ
diary-voice
# å®Ÿéš›ã®æ—¥è¨˜å†…å®¹ã‚’è©±ã™
# 'y'ã§æ—¥è¨˜ä½œæˆ
# GitHubã§ç¢ºèª
```

#### ãƒ†ã‚¹ãƒˆ4: ãƒ—ãƒ­ã‚»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã®ç¢ºèª

```bash
# Nerd Dictationã®æ®‹ç•™ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | grep -i '[n]erd-dictation'
# æœŸå¾…: ãƒ—ãƒ­ã‚»ã‚¹ãŒæ®‹ã£ã¦ã„ãªã„ï¼ˆä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„ï¼‰

# Ctrl+Cã§ã®ä¸­æ–­ãƒ†ã‚¹ãƒˆ
diary-voice
# Enterã‚­ãƒ¼æŠ¼ä¸‹å¾Œã€Ctrl+Cã§ä¸­æ–­
ps aux | grep -i '[n]erd-dictation'
# æœŸå¾…: cleanupãŒå®Ÿè¡Œã•ã‚Œã€ãƒ—ãƒ­ã‚»ã‚¹ãŒæ®‹ã£ã¦ã„ãªã„
```

---

### ã‚¿ã‚¹ã‚¯3.5: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆ15åˆ†ï¼‰

#### README.mdæ›´æ–°

```bash
# Phase 3ã®ä½¿ã„æ–¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
# è¿½åŠ å†…å®¹:
# ### Phase 3: Ubuntu PCéŸ³å£°å…¥åŠ›
# ```bash
# # éŸ³å£°å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã§æ—¥è¨˜ä½œæˆ
# diary-voice
# ```
```

#### SETUP.mdæ›´æ–°

```bash
# Phase 3ç’°å¢ƒæ§‹ç¯‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
# è¿½åŠ å†…å®¹:
# - pipx, nerd-dictation ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †
# - Voskãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ‰‹é †
# - nerd-dictation.conf è¨­å®šï¼ˆ--output=/tmp/nerd-dictation-output.txtï¼‰
# - ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šæ‰‹é †
```

**ç¢ºèª:**
```bash
# å·®åˆ†ç¢ºèª
git diff README.md SETUP.md
```

---

### ã‚¿ã‚¹ã‚¯3.6: codex-reviewå®Ÿæ–½ï¼ˆå¿…é ˆï¼‰

**ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡:** `scripts/diary-voice.sh`

**å®Ÿæ–½æ‰‹é †:**
1. `CODEX_REVIEW_GUIDE.md` ã‚’å‚ç…§
2. Claude Codeã§ä»¥ä¸‹ã‚’å®Ÿè¡Œ:
   ```
   Phase 3 ãŒå®Œäº†ã—ãŸã®ã§ã€codex-review ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚

   ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡ã€‘
   scripts/diary-voice.sh

   ã€è¦ä»¶ã€‘
   - read-only ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
   - ãƒ¬ãƒ“ãƒ¥ãƒ¼â†’ä¿®æ­£â†’å†ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ ok: true ã¾ã§ç¹°ã‚Šè¿”ã—
   ```

3. ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæžœã‚’`PROJECT_OVERVIEW.md`ã«è¨˜éŒ²

---

## Critical Files

### æ–°è¦ä½œæˆ

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² | é‡è¦åº¦ |
|---------|------|--------|
| `/home/minori/diary/scripts/diary-voice.sh` | éŸ³å£°èªè­˜çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ | â­â­â­â­â­ |

### å‚ç…§ï¼ˆæ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¨¡ç¯„ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | å‚ç…§ç›®çš„ |
|---------|---------|
| `/home/minori/diary/scripts/diary-push.sh` | è‰²ä»˜ãå‡ºåŠ›ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ§‹é€  |
| `/home/minori/diary/scripts/diary-summarize.py` | ç’°å¢ƒå¤‰æ•°ãƒã‚§ãƒƒã‚¯ã€å‡ºåŠ›åˆ†é›¢ |

### æ›´æ–°

| ãƒ•ã‚¡ã‚¤ãƒ« | æ›´æ–°å†…å®¹ |
|---------|---------|
| `/home/minori/diary/README.md` | Phase 3ã®ä½¿ã„æ–¹ã‚’è¿½è¨˜ |
| `/home/minori/diary/SETUP.md` | ç’°å¢ƒæ§‹ç¯‰æ‰‹é †ã‚’è¿½è¨˜ï¼ˆNerd Dictationï¼‰ |
| `/home/minori/diary/PROJECT_OVERVIEW.md` | codex-reviewçµæžœã‚’è¨˜éŒ² |

---

## æ¤œè¨¼æ–¹æ³•

### End-to-End ãƒ†ã‚¹ãƒˆ

```bash
# 1. ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§èµ·å‹•
diary-voice

# 2. éŸ³å£°å…¥åŠ›ï¼ˆãƒ†ã‚¹ãƒˆå†…å®¹ï¼‰
"ä»Šæ—¥ã¯æœã‹ã‚‰Phase 3ã®å®Ÿè£…ã‚’è¡Œã£ãŸã€‚
Nerd Dictationã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®šãŒå®Œäº†ã—ã€
éŸ³å£°å…¥åŠ›ã§æ—¥è¨˜ã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚
ã¨ã¦ã‚‚ä¾¿åˆ©ã«ãªã£ãŸã€‚"

# 3. èªè­˜çµæžœã‚’ç¢ºèªã—ã¦yå…¥åŠ›

# 4. GitHubç¢ºèª
TODAY=$(date +%Y-%m-%d)
git log --oneline -1
# æœŸå¾…: "diary: $TODAY - Phase 3ã®å®Ÿè£…å®Œäº†" ã®ã‚ˆã†ãªã‚³ãƒŸãƒƒãƒˆ

# 5. ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª
YEAR=$(date +%Y)
MONTH=$(date +%m)
cat diaries/$YEAR/$MONTH/$TODAY.md
# æœŸå¾…: Claude APIã§æ•´å½¢ã•ã‚ŒãŸæ—¥è¨˜ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹
```

### ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ“ä½œ | æœŸå¾…ã•ã‚Œã‚‹çµæžœ |
|------------|------|---------------|
| nerd-dictationæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« | `diary-voice`å®Ÿè¡Œ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †è¡¨ç¤º |
| Voskãƒ¢ãƒ‡ãƒ«ãªã— | `diary-voice`å®Ÿè¡Œ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‹ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ‰‹é †è¡¨ç¤º |
| éŸ³å£°èªè­˜å¤±æ•—ï¼ˆç„¡éŸ³ï¼‰ | éŸ³å£°å…¥åŠ›ã›ãšEnter | "éŸ³å£°èªè­˜ã«å¤±æ•—ã—ã¾ã—ãŸ"è¡¨ç¤º |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚­ãƒ£ãƒ³ã‚»ãƒ« | nå…¥åŠ› | "ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¾ã—ãŸ"è¡¨ç¤ºã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆçµ‚äº† |

---

## å®Œäº†åŸºæº–

- [ ] **ã‚¿ã‚¹ã‚¯3.1å®Œäº†**: ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  - [ ] pipx, nerd-dictation ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
  - [ ] Voskãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ï¼ˆ~/vosk-model-small-ja-0.22ï¼‰
  - [ ] å‹•ä½œç¢ºèªæ¸ˆã¿ï¼ˆéŸ³å£°èªè­˜ãƒ†ã‚¹ãƒˆæˆåŠŸï¼‰

- [ ] **ã‚¿ã‚¹ã‚¯3.2å®Œäº†**: diary-voice.shä½œæˆ
  - [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ¸ˆã¿ï¼ˆscripts/diary-voice.shï¼‰
  - [ ] å®Ÿè¡Œæ¨©é™ä»˜ä¸Žæ¸ˆã¿ï¼ˆchmod +xï¼‰
  - [ ] æ§‹æ–‡ãƒã‚§ãƒƒã‚¯æˆåŠŸï¼ˆbash -nï¼‰

- [ ] **ã‚¿ã‚¹ã‚¯3.3å®Œäº†**: ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®š
  - [ ] ~/.bashrcã«è¿½åŠ æ¸ˆã¿
  - [ ] åæ˜ ç¢ºèªæ¸ˆã¿ï¼ˆsource ~/.bashrcï¼‰
  - [ ] diary-voiceã‚³ãƒžãƒ³ãƒ‰ã§å®Ÿè¡Œç¢ºèªæ¸ˆã¿

- [ ] **ã‚¿ã‚¹ã‚¯3.4å®Œäº†**: å‹•ä½œãƒ†ã‚¹ãƒˆ
  - [ ] ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆæˆåŠŸ
  - [ ] éŸ³å£°èªè­˜ã®ãƒ†ã‚¹ãƒˆæˆåŠŸ
  - [ ] æ—¥è¨˜ä½œæˆã®å®Œå…¨ãƒ•ãƒ­ãƒ¼æˆåŠŸ

- [ ] **ã‚¿ã‚¹ã‚¯3.5å®Œäº†**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
  - [ ] README.mdæ›´æ–°æ¸ˆã¿ï¼ˆPhase 3ä½¿ã„æ–¹è¿½è¨˜ï¼‰
  - [ ] SETUP.mdæ›´æ–°æ¸ˆã¿ï¼ˆç’°å¢ƒæ§‹ç¯‰æ‰‹é †è¿½è¨˜ï¼‰
  - [ ] git diff ã§å·®åˆ†ç¢ºèªæ¸ˆã¿

- [ ] **ã‚¿ã‚¹ã‚¯3.6å®Œäº†**: codex-reviewå®Ÿæ–½
  - [ ] ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½æ¸ˆã¿
  - [ ] æŒ‡æ‘˜äº‹é …ä¿®æ­£æ¸ˆã¿
  - [ ] æœ€çµ‚åˆ¤å®š: Passï¼ˆok: trueï¼‰
  - [ ] PROJECT_OVERVIEW.mdã«è¨˜éŒ²

- [ ] **å®Ÿéš›ã®ä½¿ç”¨ç¢ºèª**
  - [ ] å®Ÿéš›ã«éŸ³å£°å…¥åŠ›ã§æ—¥è¨˜ã‚’1ä»¶ä½œæˆã§ããŸ
  - [ ] GitHubã«æ—¥è¨˜ãŒä¿å­˜ã•ã‚ŒãŸ
  - [ ] diary-voiceã‚³ãƒžãƒ³ãƒ‰ãŒ5ç§’ä»¥å†…ã«èµ·å‹•ã™ã‚‹

---

## ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|-------|-------|------|
| éŸ³å£°èªè­˜ç²¾åº¦ãŒä½Žã„ | é«˜ | èªè­˜çµæžœã®ç¢ºèªã‚¹ãƒ†ãƒƒãƒ—ã‚’è¿½åŠ æ¸ˆã¿ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå†…å®¹ã‚’ç¢ºèªã—ã¦ã‹ã‚‰æ—¥è¨˜ä½œæˆ |
| ãƒ—ãƒ­ã‚»ã‚¹ãŒæ®‹ã‚‹ | ä¸­ | trapã«ã‚ˆã‚‹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€cleanupé–¢æ•°ã§ã¯ kill -TERM â†’ çŸ­æ™‚é–“å¾…æ©Ÿ â†’ å¿…è¦æ™‚ kill -9 |
| ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‰Šé™¤ã•ã‚Œãªã„ | ä½Ž | èªè­˜çµæžœå–å¾—å¾Œã«è‡ªå‹•å‰Šé™¤ã€cleanupé–¢æ•°ã§ã‚‚å‰Šé™¤ |
| Voskãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¤±æ•— | ä¸­ | wgetã‚¨ãƒ©ãƒ¼æ™‚ã®å¯¾å‡¦æ³•ã‚’æç¤º |

---

## å®Ÿè£…æ™‚ã®æ³¨æ„äº‹é …

1. **æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å®Œå…¨è¸è¥²**: diary-push.shã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆè‰²ä»˜ãå‡ºåŠ›ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªï¼‰ã‚’100%ç¶™æ‰¿ã™ã‚‹ã“ã¨

2. **è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: 5ã¤ã®ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ï¼ˆnerd-dictationæœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€Voskãƒ¢ãƒ‡ãƒ«ãªã—ã€ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•å¤±æ•—ã€éŸ³å£°èªè­˜å¤±æ•—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰ã‚’ã™ã¹ã¦ç¶²ç¾…ã™ã‚‹ã“ã¨

3. **å®‰å…¨ãªãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†**: PIDç®¡ç†ã€èµ·å‹•ç¢ºèªã€çµ‚äº†å¾…æ©Ÿã€å¼·åˆ¶çµ‚äº†ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨

4. **codex-reviewã®å¿…é ˆå®Ÿæ–½**: ã‚¿ã‚¹ã‚¯3.6ã¯çœç•¥ä¸å¯ã€‚ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæžœã‚’PROJECT_OVERVIEW.mdã«è¨˜éŒ²ã™ã‚‹ã“ã¨

5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**: README.mdã¨SETUP.mdã‚’æ›´æ–°ã—ã€Phase 3ã®ä½¿ã„æ–¹ã‚’è¿½è¨˜ã™ã‚‹ã“ã¨

---

**æ‰€è¦æ™‚é–“**: ç´„4æ™‚é–“ï¼ˆåˆå­¦è€…å‘ã‘ï¼‰
**é›£æ˜“åº¦**: â˜…â˜…â˜†â˜†â˜†ï¼ˆä¸­ç´šï¼‰
**ã‚³ã‚¹ãƒˆ**: $0ï¼ˆã™ã¹ã¦ç„¡æ–™ï¼‰
